= Jpackage
:assembler_id: jpackage

Creates platform installers with the link:https://docs.oracle.com/en/java/javase/17/jpackage/packaging-overview.html[jpackage]
tool.

IMPORTANT: You need JDK 16 or greater to use `jpackage`. You may configure the xref:tools:jdks-maven.adoc[] or the
xref:tools:jdks-gradle.adoc[] to downloads JDKs.

WARNING: You may either set the `jlink` property or the `runtimeImages` property but not both.

include::partial$legend.adoc[]

[tabs]
====
YAML::
+
--
[source,yaml]
[subs="attributes,+macros"]
----
include::partial$assemble/yaml/common-head.adoc[]

      # Name of the jlink assembler to be reused.
      # icon:dot-circle[]
      jlink: app-jlink

      # Directory with file templates used to prepare the Jpackage assembler.
      # Defaults to `src/jreleaser/assemblers/${distribution.name}/jpackage`.
      # If specified, path must exist.
      # icon:dot-circle[]
      templateDirectory: path/to/jpackage/templates

      # Path to a runtime image created with jlink.
      # Must define a value for `platform`.
      # icon:dot-circle[] icon:file-alt[]
      runtimeImages:
        - path: path/to/runtime-image-osx
          platform: osx-x86_64
        - path: path/to/runtime-image-linux
          platform: linux-x86_64
        - path: path/to/runtime-image-windows
          platform: windows-x86_64

      # icon:dot-circle[]
      applicationPackage:

        # Version of the application and/or package.
        # If left undefined, will use `${project.version}`.
        # icon:dot-circle[]
        appVersion: 1.0

        # Vendor of the application.
        # If left undefined, will use `${project.vendor}`.
        # icon:dot-circle[]
        vendor: Acme

        # Copyright for the application.
        # If left undefined, will use `${project.copyright}`.
        # icon:dot-circle[]
        copyright: Duke 2021

        # Path to the license file.
        # icon:dot-circle[] icon:file-alt[]
        licenseFile: path/to/LICENSE

        # Path to override jpackage resources.
        # Icons, template files, and other resources of jpackage can be
        # over-ridden by adding replacement resources to this directory.
        # icon:dot-circle[] icon:file-alt[]
        resourceDir: path/to/resources

      # icon:dot-circle[]
      launcher:

        # Command line arguments to pass to the main class if no command
        # line arguments are given to the launcher.
        # icon:dot-circle[]
        arguments: [--version]

        # Options to pass to the Java runtime
        # icon:dot-circle[]
        javaOptions: [-Xmx2048m]

        # Name of launcher, and a path to a Properties file that contains
        # a list of key, value pairs.
        # The keys "module", "main-jar", "main-class",
        # "arguments", "java-options", "app-version", "icon", and
        # "win-console" can be used.
        # These options are added to, or used to overwrite, the original
        # command line options to build an additional alternative launcher.
        # The main application launcher will be built from the command line
        # options. Additional alternative launchers can be built using
        # this option, and this option can be used multiple times to
        # build multiple additional launchers.
        # icon:dot-circle[]
        launchers: [alt=path/to/alt.properties]

      # icon:dot-circle[]
      linux:

        # Path to the application's icon.
        # Must be in PNG format.
        # Will use default icon if undefined.
        # icon:dot-circle[] icon:file-alt[]
        icon: path/to/app.png

        # Absolute path of the installation directory of the application.
        # icon:dot-circle[] icon:file-alt[]
        installDir: /usr/local/share/app

        # The type of package to create.
        # Valid values are [`rpm`, `deb`].
        # icon:dot-circle[]
        types: [rpm, deb]

        # The JDK to use.
        # If undefined, will use the current JDK.
        # icon:dot-circle[] icon:file-alt[]
        jdk:
          path: path/to/jdk

        # Name for Linux package.
        # If undefined, will use the assembler's name.
        # icon:dot-circle[]
        packageName: app

        # Maintainer for .deb package.
        # icon:dot-circle[]
        maintainer: duke

        # Menu group this application is placed in.
        # icon:dot-circle[]
        menuGroup: apps

        # Type of the license ("License: <value>" of the RPM .spec).
        # If undefined, will use `${project.license}`
        # icon:dot-circle[]
        license: MIT

        # Release value of the RPM <name>.spec file or
        # Debian revision value of the DEB control file.
        # icon:dot-circle[]
        appRelease: 1

        # Group value of the RPM <name>.spec file or
        # Section value of DEB control file.
        # icon:dot-circle[]
        appCategory: devel

        # Creates a shortcut for the application
        # icon:dot-circle[]
        shortcut: true

        # Required packages or capabilities for the application
        # icon:dot-circle[]
        packageDeps: [foobar]

      # icon:dot-circle[]
      osx:

        # Path to the application's icon.
        # Must be in ICNS format.
        # Will use default icon if undefined.
        # icon:dot-circle[] icon:file-alt[]
        icon: path/to/app.icns

        # Absolute path of the installation directory of the application.
        # icon:dot-circle[] icon:file-alt[]
        installDir: /Applications/app

        # The type of package to create.
        # Valid values are [`dmg`, `pkh`].
        # icon:dot-circle[]
        types: [dmg, pkg]

        # The JDK to use.
        # If undefined, will use the current JDK.
        # icon:dot-circle[] icon:file-alt[]
        jdk:
          path: path/to/jdk

        # Name of the application as it appears in the Menu Bar.
        # This can be different from the application name.
        # This name must be less than 16 characters long and be suitable for
        # displaying in the menu bar and the application Info window.
        # If undefined, will use the assembler's name.
        # icon:dot-circle[]
        packageName: app

        # An identifier that uniquely identifies the application for macOS.
        # Defaults to the main class name.
        # May only use alphanumeric (A-Z,a-z,0-9), hyphen (-),
        # and period (.) characters.
        # icon:dot-circle[]
        packageIdentifier: com.acme.app

        # When signing the application package, this value is prefixed
        # to all components that need to be signed that don't have
        # an existing package identifier.
        # icon:dot-circle[]
        packageSigningPrefix: com.acme

        # Path of the keychain to search for the signing identity.
        # If not specified, the standard keychains are used.
        # icon:dot-circle[] icon:file-alt[]
        signingKeychain: path/to/keychain

        # Team name portion in Apple signing identities' names.
        # icon:dot-circle[]
        signingKeyUsername: duke

        # Request that the package be signed
        # Defaults to `false`.
        # icon:dot-circle[]
        sign: true

      # icon:dot-circle[]
      windows:

        # Path to the application's icon.
        # Must be in ICO format.
        # Will use default icon if undefined.
        # icon:dot-circle[] icon:file-alt[]
        icon: path/to/app.ico

        # Absolute path of the installation directory of the application.
        # icon:dot-circle[] icon:file-alt[]
        installDir: 'C:\\\\Applications\\App'

        # The type of package to create.
        # Valid values are [`exe`, `msi`].
        # icon:dot-circle[]
        types: [exe, msi]

        # The JDK to use.
        # If undefined, will use the current JDK.
        # icon:dot-circle[] icon:file-alt[]
        jdk:
          path: path/to/jdk

        # Creates a console launcher for the application, should be
        # specified for application which requires console interactions.
        # Defaults to `false`.
        # icon:dot-circle[]
        console: true

        # Adds a dialog to enable the user to choose a directory in which
        # the product is installed.
        # Defaults to `false`.
        # icon:dot-circle[]
        dirChooser: true

        # Adds the application to the system menu.
        # Defaults to `false`.
        # icon:dot-circle[]
        menu: true

        # Request to perform an install on a per-user basis.
        # Defaults to `false`.
        # icon:dot-circle[]
        perUserInstall: true

        # Creates a desktop shortcut for the application.
        # Defaults to `false`.
        # icon:dot-circle[]
        shortcut: true

        # Start Menu group this application is placed in.
        # icon:dot-circle[]
        menuGroup: Applications

        # UUID associated with upgrades for this package.
        # icon:dot-circle[]
        upgradeUuid: ba209999-0c6c-11d2-97cf-00c04f8eea45

include::partial$assemble/yaml/common-java.adoc[]
----
--
TOML::
+
--
[source,toml]
[subs="attributes,+macros"]
----
include::partial$assemble/toml/common-head.adoc[]

  # Name of the jlink assembler to be reused.
  # icon:dot-circle[]
  jlink = "app-jlink"

  # Directory with file templates used to prepare the Jpackage assembler.
  # Defaults to `src/jreleaser/assemblers/${distribution.name}/jpackage`.
  # If specified, path must exist.
  # icon:dot-circle[]
  templateDirectory = "path/to/jpackage/templates"

  # Path to a runtime image created with jlink.
  # Must define a value for `platform`.
  # icon:dot-circle[] icon:file-alt[]
  runtimeImages = [
    { path = "path/to/runtime-image-osx", platform = "osx-x86_64" },
    { path = "path/to/runtime-image-osx", platform = "linux-x86_64" },
    { path = "path/to/runtime-image-windows", platform = "windows-x86_64" }]

  # icon:dot-circle[]
  [assemble.{assembler_id}.app.applicationPackage]

    # Version of the application and/or package.
    # If left undefined, will use `${project.version}`.
    # icon:dot-circle[]
    appVersion = "1.0"

    # Vendor of the application.
    # If left undefined, will use `${project.vendor}`.
    # icon:dot-circle[]
    vendor = "Acme"

    # Copyright for the application.
    # If left undefined, will use `${project.copyright}`.
    # icon:dot-circle[]
    copyright = "Duke 2021"

    # Path to the license file.
    # icon:dot-circle[] icon:file-alt[]
    licenseFile = "path/to/LICENSE"

    # Path to override jpackage resources.
    # Icons, template files, and other resources of jpackage can be
    # over-ridden by adding replacement resources to this directory.
    # icon:dot-circle[] icon:file-alt[]
    resourceDir = "path/to/resources"

  # icon:dot-circle[]
  [assemble.{assembler_id}.app.launcher]

    # Command line arguments to pass to the main class if no command
    # line arguments are given to the launcher.
    # icon:dot-circle[]
    arguments = ["--version"]

    # Options to pass to the Java runtime
    # icon:dot-circle[]
    javaOptions = ["-Xmx2048m"]

    # Name of launcher, and a path to a Properties file that contains
    # a list of key, value pairs.
    # The keys "module", "main-jar", "main-class",
    # "arguments", "java-options", "app-version", "icon", and
    # "win-console" can be used.
    # These options are added to, or used to overwrite, the original
    # command line options to build an additional alternative launcher.
    # The main application launcher will be built from the command line
    # options. Additional alternative launchers can be built using
    # this option, and this option can be used multiple times to
    # build multiple additional launchers.
    # icon:dot-circle[]
    launchers = ["alt=path/to/alt.properties"]

  # icon:dot-circle[]
  [assemble.{assembler_id}.app.linux]

    # Path to the application's icon.
    # Must be in PNG format.
    # Will use default icon if undefined.
    # icon:dot-circle[] icon:file-alt[]
    icon = "path/to/app.png"

    # Absolute path of the installation directory of the application.
    # icon:dot-circle[] icon:file-alt[]
    installDir = "/usr/local/share/app"

    # The type of package to create.
    # Valid values are [`rpm`, `deb`].
    # icon:dot-circle[]
    types = ["rpm", "deb"]

    # The JDK to use.
    # If undefined, will use the current JDK.
    # icon:dot-circle[] icon:file-alt[]
    jdk = { path = "path/to/jdk" }

    # Name for Linux package.
    # If undefined, will use the assembler's name.
    # icon:dot-circle[]
    packageName = "app"

    # Maintainer for .deb package.
    # icon:dot-circle[]
    maintainer = "duke"

    # Menu group this application is placed in.
    # icon:dot-circle[]
    menuGroup = "apps"

    # Type of the license ("License: <value>" of the RPM .spec).
    # If undefined, will use `${project.license}`
    # icon:dot-circle[]
    license = "MIT"

    # Release value of the RPM <name>.spec file or
    # Debian revision value of the DEB control file.
    # icon:dot-circle[]
    appRelease = "1"

    # Group value of the RPM <name>.spec file or
    # Section value of DEB control file.
    # icon:dot-circle[]
    appCategory = "devel"

    # Creates a shortcut for the application
    # icon:dot-circle[]
    shortcut = true

    # Required packages or capabilities for the application
    # icon:dot-circle[]
    packageDeps = ["foobar"]

  # icon:dot-circle[]
  [assemble.{assembler_id}.app.osx]

    # Path to the application's icon.
    # Must be in ICNS format.
    # Will use default icon if undefined.
    # icon:dot-circle[] icon:file-alt[]
    icon = "path/to/app.icns"

    # Absolute path of the installation directory of the application.
    # icon:dot-circle[] icon:file-alt[]
    installDir = "/Applications/app"

    # The type of package to create.
    # Valid values are [`dmg`, `pkh`].
    # icon:dot-circle[]
    types = ["dmg", "pkg"]

    # The JDK to use.
    # If undefined, will use the current JDK.
    # icon:dot-circle[] icon:file-alt[]
    jdk = { path = "path/to/jdk" }

    # Name of the application as it appears in the Menu Bar.
    # This can be different from the application name.
    # This name must be less than 16 characters long and be suitable for
    # displaying in the menu bar and the application Info window.
    # If undefined, will use the assembler's name.
    # icon:dot-circle[]
    packageName = "app"

    # An identifier that uniquely identifies the application for macOS.
    # Defaults to the main class name.
    # May only use alphanumeric (A-Z,a-z,0-9), hyphen (-),
    # and period (.) characters.
    # icon:dot-circle[]
    packageIdentifier = "com.acme.app"

    # When signing the application package, this value is prefixed
    # to all components that need to be signed that don't have
    # an existing package identifier.
    # icon:dot-circle[]
    packageSigningPrefix = "com.acme"

    # Path of the keychain to search for the signing identity.
    # If not specified, the standard keychains are used.
    # icon:dot-circle[] icon:file-alt[]
    signingKeychain = "path/to/keychain"

    # Team name portion in Apple signing identities' names.
    # icon:dot-circle[]
    signingKeyUsername = "duke"

    # Request that the package be signed
    # Defaults to `false`.
    # icon:dot-circle[]
    sign = true

  # icon:dot-circle[]
  [assemble.{assembler_id}.app.windows]

    # Path to the application's icon.
    # Must be in ICO format.
    # Will use default icon if undefined.
    # icon:dot-circle[] icon:file-alt[]
    icon = "path/to/app.ico"

    # Absolute path of the installation directory of the application.
    # icon:dot-circle[] icon:file-alt[]
    installDir = "C:\\\\Applications\\App"

    # The type of package to create.
    # Valid values are [`exe`, `msi`].
    # icon:dot-circle[]
    types = ["exe", "msi"]

    # The JDK to use.
    # If undefined, will use the current JDK.
    # icon:dot-circle[] icon:file-alt[]
    jdk = { path = "path/to/jdk" }

    # Creates a console launcher for the application, should be
    # specified for application which requires console interactions.
    # Defaults to `false`.
    # icon:dot-circle[]
    console = true

    # Adds a dialog to enable the user to choose a directory in which
    # the product is installed.
    # Defaults to `false`.
    # icon:dot-circle[]
    dirChooser = true

    # Adds the application to the system menu.
    # Defaults to `false`.
    # icon:dot-circle[]
    menu = true

    # Request to perform an install on a per-user basis.
    # Defaults to `false`.
    # icon:dot-circle[]
    perUserInstall = true

    # Creates a desktop shortcut for the application.
    # Defaults to `false`.
    # icon:dot-circle[]
    shortcut = true

    # Start Menu group this application is placed in.
    # icon:dot-circle[]
    menuGroup = "Applications"

    # UUID associated with upgrades for this package.
    # icon:dot-circle[]
    upgradeUuid = "ba209999-0c6c-11d2-97cf-00c04f8eea45"

include::partial$assemble/toml/common-java.adoc[]
----
--
JSON::
+
--
[source,json]
[subs="attributes,+macros"]
----
include::partial$assemble/json/common-head.adoc[]

        // Name of the jlink assembler to be reused.
        // icon:dot-circle[]
        "jlink": "app-jlink",

        // Directory with file templates used to prepare the Jpackage assembler.
        // Defaults to `src/jreleaser/assemblers/${distribution.name}/jpackage`.
        // If specified, path must exist.
        // icon:dot-circle[]
        "templateDirectory": "path/to/jpackage/templates",

        // Path to a runtime image created with jlink.
        // Must define a value for `platform`.
        // icon:dot-circle[] icon:file-alt[]
        "runtimeImages": [
          {
            "path": "path/to/runtime-image-osx",
            "platform": "osx-x86_64"
          },
          {
            "path": "path/to/runtime-image-linux",
            "platform": "linux-x86_64"
          },
          {
            "path": "path/to/runtime-image-windos",
            "platform": "windows-x86_64"
          }
        ],

        // icon:dot-circle[]
        "applicationPackage": {

          // Version of the application and/or package.
          // If left undefined, will use `${project.version}`.
          // icon:dot-circle[]
          "appVersion": "1.0",

          // Vendor of the application.
          // If left undefined, will use `${project.vendor}`.
          // icon:dot-circle[]
          "vendor": "Acme",

          // Copyright for the application.
          // If left undefined, will use `${project.copyright}`.
          // icon:dot-circle[]
          "copyright": "Duke 2021",

          // Path to the license file.
          // icon:dot-circle[] icon:file-alt[]
          "licenseFile": "path/to/LICENSE",

          // Path to override jpackage resources.
          // Icons, template files, and other resources of jpackage can be
          // over-ridden by adding replacement resources to this directory.
          // icon:dot-circle[] icon:file-alt[]
          "resourceDir": "path/to/resources"
        },

        // icon:dot-circle[]
        "launcher": {

          // Command line arguments to pass to the main class if no command
          // line arguments are given to the launcher.
          // icon:dot-circle[]
          "arguments": ["--version"],

          // Options to pass to the Java runtime
          // icon:dot-circle[]
          "javaOptions": ["-Xmx2048m"],

          // Name of launcher, and a path to a Properties file that contains
          // a list of key, value pairs.
          // The keys "module", "main-jar", "main-class",
          // "arguments", "java-options", "app-version", "icon", and
          // "win-console" can be used.
          // These options are added to, or used to overwrite, the original
          // command line options to build an additional alternative launcher.
          // The main application launcher will be built from the command line
          // options. Additional alternative launchers can be built using
          // this option, and this option can be used multiple times to
          // build multiple additional launchers.
          // icon:dot-circle[]
          "launchers": ["alt=path/to/alt.properties"]
        },

        // icon:dot-circle[]
        "linux": {

          // Path to the application's icon.
          // Must be in PNG format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          "icon": "path/to/app.png",

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          "installDir": "/usr/local/share/app",

          // The type of package to create.
          // Valid values are [`rpm`, `deb`].
          // icon:dot-circle[]
          "types": ["rpm", "deb"],

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          "jdk": {
            "path": "path/to/jdk"
          },

          // Name for Linux package.
          // If undefined, will use the assembler's name.
          // icon:dot-circle[]
          "packageName": "app",

          // Maintainer for .deb package.
          // icon:dot-circle[]
          "maintainer": "duke",

          // Menu group this application is placed in.
          // icon:dot-circle[]
          "menuGroup": "apps",

          // Type of the license ("License: <value>" of the RPM .spec).
          // If undefined, will use `${project.license}`
          // icon:dot-circle[]
          "license": "MIT",

          // Release value of the RPM <name>.spec file or
          // Debian revision value of the DEB control file.
          // icon:dot-circle[]
          "appRelease": "1",

          // Group value of the RPM <name>.spec file or
          // Section value of DEB control file.
          // icon:dot-circle[]
          "appCategory": "devel",

          // Creates a shortcut for the application
          // icon:dot-circle[]
          "shortcut": true,

          // Required packages or capabilities for the application
          // icon:dot-circle[]
          "packageDeps": ["foobar"]
        },

        // icon:dot-circle[]
        "osx": {

          // Path to the application's icon.
          // Must be in ICNS format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          "icon": "path/to/app.icns",

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          "installDir": "/Applications/app",

          // The type of package to create.
          // Valid values are [`dmg`, `pkh`].
          // icon:dot-circle[]
          "types": ["dmg", "pkg"],

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          "jdk": {
            "path": "path/to/jdk"
          },

          // Name of the application as it appears in the Menu Bar.
          // This can be different from the application name.
          // This name must be less than 16 characters long and be suitable for
          // displaying in the menu bar and the application Info window.
          // If undefined, will use the assembler's name.
          // icon:dot-circle[]
          "packageName": "app",

          // An identifier that uniquely identifies the application for macOS.
          // Defaults to the main class name.
          // May only use alphanumeric (A-Z,a-z,0-9), hyphen (-),
          // and period (.) characters.
          // icon:dot-circle[]
          "packageIdentifier": "com.acme.app",

          // When signing the application package, this value is prefixed
          // to all components that need to be signed that don't have
          // an existing package identifier.
          // icon:dot-circle[]
          "packageSigningPrefix": "com.acme",

          // Path of the keychain to search for the signing identity.
          // If not specified, the standard keychains are used.
          // icon:dot-circle[] icon:file-alt[]
          "signingKeychain": "path/to/keychain",

          // Team name portion in Apple signing identities' names.
          // icon:dot-circle[]
          "signingKeyUsername": "duke",

          // Request that the package be signed
          // Defaults to `false`.
          // icon:dot-circle[]
          "sign": true
        },

        // icon:dot-circle[]
        "windows": {

          // Path to the application's icon.
          // Must be in ICO format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          "icon": "path/to/app.ico",

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          "installDir": "'C:\\\\Applications\\App",

          // The type of package to create.
          // Valid values are [`exe`, `msi`].
          // icon:dot-circle[]
          "types": ["exe", "msi"],

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          "jdk": {
            "path": "path/to/jdk"
          },

          // Creates a console launcher for the application, should be
          // specified for application which requires console interactions.
          // Defaults to `false`.
          // icon:dot-circle[]
          "console": true,

          // Adds a dialog to enable the user to choose a directory in which
          // the product is installed.
          // Defaults to `false`.
          // icon:dot-circle[]
          "dirChooser": true,

          // Adds the application to the system menu.
          // Defaults to `false`.
          // icon:dot-circle[]
          "menu": true,

          // Request to perform an install on a per-user basis.
          // Defaults to `false`.
          // icon:dot-circle[]
          "perUserInstall": true,

          // Creates a desktop shortcut for the application.
          // Defaults to `false`.
          // icon:dot-circle[]
          "shortcut": true,

          // Start Menu group this application is placed in.
          // icon:dot-circle[]
          "menuGroup": "Applications",

          // UUID associated with upgrades for this package.
          // icon:dot-circle[]
          "upgradeUuid": "ba209999-0c6c-11d2-97cf-00c04f8eea45"
        },

include::partial$assemble/json/common-java.adoc[]
include::partial$assemble/json/common-footer.adoc[]
----
--
Maven::
+
--
[source,xml]
[subs="attributes,verbatim,+macros"]
----
include::partial$assemble/maven/common-head.adoc[]

        <!--
          Name of the jlink assembler to be reused.
          icon:dot-circle[]
        -->
        <jlink>app-jlink</jlink>

        <!--
          Directory with file templates used to prepare the Jpackage assembler.
          Defaults to `src/jreleaser/assemblers/${distribution.name}/jpackage`.
          If specified, path must exist.
          icon:dot-circle[]
        -->
        <templateDirectory>path/to/jpackage/templates</templateDirectory>

        <!--
          Path to a runtime image created with jlink.
          Must define a value for `platform`.
          icon:dot-circle[] icon:file-alt[]
        -->
        <runtimeImages>
          <runtimeImage>
            <path>path/to/runtime-image-osx</path>
            <platform>osx-x86_64</platform>
          </runtimeImage>
          <runtimeImage>
            <path>path/to/runtime-image-linux</path>
            <platform>linux-x86_64</platform>
          </runtimeImage>
          <runtimeImage>
            <path>path/to/runtime-image-windows</path>
            <platform>windows-x86_64</platform>
          </runtimeImage>
        </runtimeImages>

        <!--
          icon:dot-circle[]
        -->
        <applicationPackage>

          <!--
            Version of the application and/or package.
            If left undefined, will use `${project.version}`.
            icon:dot-circle[]
          -->
          <appVersion>1.0</appVersion>

          <!--
            Vendor of the application.
            If left undefined, will use `${project.vendor}`.
            icon:dot-circle[]
          -->
          <vendor>Acme</vendor>

          <!--
            Copyright for the application.
            If left undefined, will use `${project.copyright}`.
            icon:dot-circle[]
          -->
          <copyright>Duke 2021</copyright>

          <!--
            Path to the license file.
            icon:dot-circle[] icon:file-alt[]
          -->
          <licenseFile>path/to/LICENSE<l/icenseFile>

          <!--
            Path to override jpackage resources.
            Icons, template files, and other resources of jpackage can be
            over-ridden by adding replacement resources to this directory.
            icon:dot-circle[] icon:file-alt[]
          -->
          <resourceDir>path/to/resources</resourceDir>
        </applicationPackage>

        <!--
          icon:dot-circle[]
        -->
        <launcher>

          <!--
            Command line arguments to pass to the main class if no command
            line arguments are given to the launcher.
            icon:dot-circle[]
          -->
          <arguments>--version</arguments>

          <!--
            Options to pass to the Java runtime
            icon:dot-circle[]
          -->
          <javaOptions>-Xmx2048m</javaOptions>

          <!--
            Name of launcher, and a path to a Properties file that contains
            a list of key, value pairs.
            The keys "module", "main-jar", "main-class",
            "arguments", "java-options", "app-version", "icon", and
            "win-console" can be used.
            These options are added to, or used to overwrite, the original
            command line options to build an additional alternative launcher.
            The main application launcher will be built from the command line
            options. Additional alternative launchers can be built using
            this option, and this option can be used multiple times to
            build multiple additional launchers.
            icon:dot-circle[]
          -->
          <launchers>
            <launcher>alt=path/to/alt.properties</launcher>
          </launcher>
        </launcher>

        <!--
          icon:dot-circle[]
        -->
        <linux>

          <!--
            Path to the applications icon.
            Must be in PNG format.
            Will use default icon if undefined.
            icon:dot-circle[] icon:file-alt[]
          -->
          <icon>path/to/app.png</icon>

          <!--
            Absolute path of the installation directory of the application.
            icon:dot-circle[] icon:file-alt[]
          -->
          <installDir>/usr/local/share/app</installDir>

          <!--
            The type of package to create.
            Valid values are [`rpm`, `deb`].
            icon:dot-circle[]
          -->
          <types>rpm,deb</types>

          <!--
            The JDK to use.
            If undefined, will use the current JDK.
            icon:dot-circle[] icon:file-alt[]
          -->
          <jdk>
            <path>path/to/jdk</path>
          </jdk>

          <!--
            Name for Linux package.
            If undefined, will use the assemblers name.
            icon:dot-circle[]
          -->
          <packageName>app</packageName>

          <!--
            Maintainer for .deb package.
            icon:dot-circle[]
          -->
          <maintainer>duke</maintainer>

          <!--
            Menu group this application is placed in.
            icon:dot-circle[]
          -->
          <menuGroup>apps</menuGroup>

          <!--
            Type of the license ("License: <value>" of the RPM .spec).
            If undefined, will use `${project.license}`
            icon:dot-circle[]
          -->
          <license>MIT</license>

            Release value of the RPM <name>.spec file or
            Debian revision value of the DEB control file.
            icon:dot-circle[]
          -->
          <appRelease>1</appRelease>

          <!--
            Group value of the RPM <name>.spec file or
            Section value of DEB control file.
            icon:dot-circle[]
          -->
          <appCategory>devel</appCategory>

          <!--
            Creates a shortcut for the application
            icon:dot-circle[]
          -->
          <shortcut>true</shortcut>

          <!--
            Required packages or capabilities for the application
            icon:dot-circle[]
          -->
          <packageDeps>foobar</packageDeps>
        </linux>

        <!--
          icon:dot-circle[]
        -->
        <osx>

          <!--
            Path to the applications icon.
            Must be in ICNS format.
            Will use default icon if undefined.
            icon:dot-circle[] icon:file-alt[]
          -->
          <icon>path/to/app.icns</icon>

          <!--
            Absolute path of the installation directory of the application.
            icon:dot-circle[] icon:file-alt[]
          -->
          <installDir>/Applications/app</installDir>

          <!--
            The type of package to create.
            Valid values are [`dmg`, `pkh`].
            icon:dot-circle[]
          -->
          <types>dmg,pkg</types>

          <!--
            The JDK to use.
            If undefined, will use the current JDK.
            icon:dot-circle[] icon:file-alt[]
          -->
          <jdk>
            <path>path/to/jdk</path>
          </jdk>

          <!--
            Name of the application as it appears in the Menu Bar.
            This can be different from the application name.
            This name must be less than 16 characters long and be suitable for
            displaying in the menu bar and the application Info window.
            If undefined, will use the assemblers name.
            icon:dot-circle[]
          -->
          <packageName>app</packageName>

          <!--
            An identifier that uniquely identifies the application for macOS.
            Defaults to the main class name.
            May only use alphanumeric (A-Z,a-z,0-9), hyphen (-),
            and period (.) characters.
            icon:dot-circle[]
          -->
          <packageIdentifier>com.acme.app</packageIdentifier>

          <!--
            When signing the application package, this value is prefixed
            to all components that need to be signed that dont have
            an existing package identifier.
            icon:dot-circle[]
          -->
          <packageSigningPrefix>com.acme</packageSigningPrefix>

          <!--
            Path of the keychain to search for the signing identity.
            If not specified, the standard keychains are used.
            icon:dot-circle[] icon:file-alt[]
          -->
          <signingKeychain>path/to/keychain</signingKeychain>

          <!--
            Team name portion in Apple signing identities names.
            icon:dot-circle[]
          -->
          <signingKeyUsername>duke</signingKeyUsername>

          <!--
            Request that the package be signed
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <sign>true</sign>
        </osx>

        <!--
          icon:dot-circle[]
        -->
        <windows>

          <!--
            Path to the applications icon.
            Must be in ICO format.
            Will use default icon if undefined.
            icon:dot-circle[] icon:file-alt[]
          -->
          <icon>path/to/app.ico</icon>

          <!--
            Absolute path of the installation directory of the application.
            icon:dot-circle[] icon:file-alt[]
          -->
          <installDir>C:\\\\Applications\\App</installDir>

          <!--
            The type of package to create.
            Valid values are [`exe`, `msi`].
            icon:dot-circle[]
          -->
          <types>exe,msi</types>

          <!--
            The JDK to use.
            If undefined, will use the current JDK.
            icon:dot-circle[] icon:file-alt[]
          -->
          <jdk>
            <path>path/to/jdk</path>
          </jdk>

          <!--
            Creates a console launcher for the application, should be
            specified for application which requires console interactions.
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <console>true</console>

          <!--
            Adds a dialog to enable the user to choose a directory in which
            the product is installed.
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <dirChooser>true</dirChooser>

          <!--
            Adds the application to the system menu.
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <menu>true</menu>

          <!--
            Request to perform an install on a per-user basis.
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <perUserInstall>true</perUserInstall>

          <!--
            Creates a desktop shortcut for the application.
            Defaults to `false`.
            icon:dot-circle[]
          -->
          <shortcut>true</shortcut>

          <!--
            Start Menu group this application is placed in.
            icon:dot-circle[]
          -->
          <menuGroup>Applications</menuGroup>

          <!--
            UUID associated with upgrades for this package.
            icon:dot-circle[]
          -->
          <upgradeUuid>ba209999-0c6c-11d2-97cf-00c04f8eea45</upgradeUuid>
        </windows>

include::partial$assemble/maven/common-java.adoc[]
include::partial$assemble/maven/common-footer.adoc[]
----
--
Gradle::
+
--
[source,groovy]
[subs="attributes,+macros"]
----
include::partial$assemble/gradle/common-head.adoc[]

        // Name of the jlink assembler to be reused.
        // icon:dot-circle[]
        jlink = 'app-jlink'

        // Directory with file templates used to prepare the Jpackage assembler.
        // Defaults to `src/jreleaser/assemblers/${distribution.name}/jpackage`.
        // If specified, path must exist.
        // icon:dot-circle[]
        templateDirectory = 'path/to/jpackage/templates'

        // Path to a runtime image created with jlink.
        // Must define a value for `platform`.
        // icon:dot-circle[] icon:file-alt[]
        runtimeImage {
          path = 'path/to/runtime-image-osx'
          platform = 'osx-x86_64'
        }
        runtimeImage {
          path = 'path/to/runtime-image-linux'
          platform = 'linux-x86_64'
        }
        runtimeImage {
          path = 'path/to/runtime-image-windows'
          platform = 'windows-x86_64'
        }

        // icon:dot-circle[]
        applicationPackage {

          // Version of the application and/or package.
          // If left undefined, will use `${project.version}`.
          // icon:dot-circle[]
          appVersion = '1.0'

          // Vendor of the application.
          // If left undefined, will use `${project.vendor}`.
          // icon:dot-circle[]
          vendor = 'Acme'

          // Copyright for the application.
          // If left undefined, will use `${project.copyright}`.
          // icon:dot-circle[]
          copyright = 'Duke 2021'

          // Path to the license file.
          // icon:dot-circle[] icon:file-alt[]
          licenseFile = 'path/to/LICENSE'

          // Path to override jpackage resources.
          // Icons, template files, and other resources of jpackage can be
          // over-ridden by adding replacement resources to this directory.
          // icon:dot-circle[] icon:file-alt[]
          resourceDir = 'path/to/resources'
        }

        // icon:dot-circle[]
        launcher {

          // Command line arguments to pass to the main class if no command
          // line arguments are given to the launcher.
          // icon:dot-circle[]
          arguments = ['--version']

          // Options to pass to the Java runtime
          // icon:dot-circle[]
          javaOptions = ['-Xmx2048m']

          // Name of launcher, and a path to a Properties file that contains
          // a list of key, value pairs.
          // The keys "module", "main-jar", "main-class",
          // "arguments", "java-options", "app-version", "icon", and
          // "win-console" can be used.
          // These options are added to, or used to overwrite, the original
          // command line options to build an additional alternative launcher.
          // The main application launcher will be built from the command line
          // options. Additional alternative launchers can be built using
          // this option, and this option can be used multiple times to
          // build multiple additional launchers.
          // icon:dot-circle[]
          launchers = ['alt=path/to/alt.properties']
        }

        // icon:dot-circle[]
        linux {

          // Path to the application's icon.
          // Must be in PNG format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          icon = 'path/to/app.png'

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          installDir = '/usr/local/share/app'

          // The type of package to create.
          // Valid values are [`rpm`, `deb`].
          // icon:dot-circle[]
          types = ['rpm', 'deb']

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          jdk {
            path = 'path/to/jdk'
          }

          // Name for Linux package.
          // If undefined, will use the assembler's name.
          // icon:dot-circle[]
          packageName = 'app'

          // Maintainer for .deb package.
          // icon:dot-circle[]
          maintainer = 'duke'

          // Menu group this application is placed in.
          // icon:dot-circle[]
          menuGroup = 'apps'

          // Type of the license ("License: <value>" of the RPM .spec).
          // If undefined, will use `${project.license}`
          // icon:dot-circle[]
          license = 'MIT'

          // Release value of the RPM <name>.spec file or
          // Debian revision value of the DEB control file.
          // icon:dot-circle[]
          appRelease = '1'

          // Group value of the RPM <name>.spec file or
          // Section value of DEB control file.
          // icon:dot-circle[]
          appCategory = 'devel'

          // Creates a shortcut for the application
          // icon:dot-circle[]
          shortcut = true

          // Required packages or capabilities for the application
          // icon:dot-circle[]
          packageDeps = ['foobar']
        }

        // icon:dot-circle[]
        osx {

          // Path to the application's icon.
          // Must be in ICNS format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          icon = 'path/to/app.icns'

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          installDir = '/Applications/app'

          // The type of package to create.
          // Valid values are [`dmg`, `pkh`].
          // icon:dot-circle[]
          types = ['dmg', 'pkg']

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          jdk {
            path = 'path/to/jdk'
          }

          // Name of the application as it appears in the Menu Bar.
          // This can be different from the application name.
          // This name must be less than 16 characters long and be suitable for
          // displaying in the menu bar and the application Info window.
          // If undefined, will use the assembler's name.
          // icon:dot-circle[]
          packageName = 'app'

          // An identifier that uniquely identifies the application for macOS.
          // Defaults to the main class name.
          // May only use alphanumeric (A-Z,a-z,0-9), hyphen (-),
          // and period (.) characters.
          // icon:dot-circle[]
          packageIdentifier = 'com.acme.app'

          // When signing the application package, this value is prefixed
          // to all components that need to be signed that don't have
          // an existing package identifier.
          // icon:dot-circle[]
          packageSigningPrefix = 'com.acme'

          // Path of the keychain to search for the signing identity.
          // If not specified, the standard keychains are used.
          // icon:dot-circle[] icon:file-alt[]
          signingKeychain = 'path/to/keychain'

          // Team name portion in Apple signing identities' names.
          // icon:dot-circle[]
          signingKeyUsername = 'duke'

          // Request that the package be signed
          // Defaults to `false`.
          // icon:dot-circle[]
          sign = true
        }

        // icon:dot-circle[]
        windows {

          // Path to the application's icon.
          // Must be in ICO format.
          // Will use default icon if undefined.
          // icon:dot-circle[] icon:file-alt[]
          icon = 'path/to/app.ico'

          // Absolute path of the installation directory of the application.
          // icon:dot-circle[] icon:file-alt[]
          installDir = 'C:\\\\Applications\\App'

          // The type of package to create.
          // Valid values are [`exe`, `msi`].
          // icon:dot-circle[]
          types = ['exe', 'msi']

          // The JDK to use.
          // If undefined, will use the current JDK.
          // icon:dot-circle[] icon:file-alt[]
          jdk {
            path = 'path/to/jdk'
          }

          // Creates a console launcher for the application, should be
          // specified for application which requires console interactions.
          // Defaults to `false`.
          // icon:dot-circle[]
          console = true

          // Adds a dialog to enable the user to choose a directory in which
          // the product is installed.
          // Defaults to `false`.
          // icon:dot-circle[]
          dirChooser = true

          // Adds the application to the system menu.
          // Defaults to `false`.
          // icon:dot-circle[]
          menu = true

          // Request to perform an install on a per-user basis.
          // Defaults to `false`.
          // icon:dot-circle[]
          perUserInstall = true

          // Creates a desktop shortcut for the application.
          // Defaults to `false`.
          // icon:dot-circle[]
          shortcut = true

          // Start Menu group this application is placed in.
          // icon:dot-circle[]
          menuGroup = 'Applications'

          // UUID associated with upgrades for this package.
          // icon:dot-circle[]
          upgradeUuid = 'ba209999-0c6c-11d2-97cf-00c04f8eea45'
        }

include::partial$assemble/gradle/common-java.adoc[]
include::partial$assemble/gradle/common-footer.adoc[]
----
--
====

== JDK

The path for `jdk` must exist in the file system. You may use the
xref:tools:jdks-maven.adoc#_configuration_dsl[{icon_maven_s} jdks-maven-plugin] or
xref:tools:jdks-gradle.adoc#_configuration_dsl[{icon_gradle_s} jdks-gradle-plugin] to download a JDK distribution.

== Templates

The default location for templates is:

`src/jreleaser/assemblers/<distribution-name>/jpackage`

== Examples

=== Jlink + JPackage

you may have JReleaser assemble a runtime image via xref:configuration:assemble/jlink.adoc[] and consume it with this
assembler. The following snippet shows how to configure a non-exported `jlink` assembly named `app-jlink` which is consumed
by a `jpackage` assembly named `app`. This in turns creates a xref:ROOT:distributions/native-package.adoc[] distribution
named `app`.

[source,yaml]
----
project:
  version: '1.0.0'
  name: app
  description: Awesome App
  longDescription: Awesome App is awesome

  website: https://acme.com/app
  authors:
    - Duke
  license: Apache-2.0
  vendor: Kordamp
  java:
    mainClass: com.acme.Main
    groupId: com.acme
    artifactId: app
    version: 17
  extraProperties:
    inceptionYear: 2021

assemble:
  jlink:
    app-jlink:
      active: always
      exported: false
      moduleName: com.acme.demo
      executable: app
      jdeps:
        multiRelease: 17
        ignoreMissingDeps: true
      copyJars: false
      mainJar:
        path: 'target/app-{{projectVersion}}.jar'
  jpackage:
    app:
      active: always
      exported: true
      jlink: app-jlink
      linux:
        types: [rpm]
      osx:
        types: [dmg]
      windows:
        types: [exe]
----

This creates the following files when run on Linux, OSX, and Windows nodes using the following command:

[source]
----
$ jreleaser assemble
----

* app-1.0.0-1.x86_64.rpm
* app-1.0.0-osx-x86_64.dmg
* app-1.0.0-windows-x86_64.exe

=== Existing Runtime Image

If you have an existing runtime image that you'd like to reuse then configure it directly using the `runtimeImage.path`
property. Assuming you have a suitable runtime image available at `target/runtime-image` then the following will create
`dmg` and `pkg` files when run on OSX:

[source,yaml]
----
project:
  version: '1.0.0'
  name: app
  description: Awesome App
  longDescription: Awesome App is awesome

  website: https://acme.com/app
  authors:
    - Duke
  license: Apache-2.0
  vendor: Kordamp
  java:
    mainClass: com.acme.Main
    groupId: com.acme
    artifactId: app
    version: 17
  extraProperties:
    inceptionYear: 2021

assemble:
  jpackage:
    app:
      active: always
      exported: true
      runtimeImages:
        - path: path/to/runtime-image-osx
          platform: osx-x86_64
        - path: path/to/runtime-image-linux
          platform: linux-x86_64
        - path: path/to/runtime-image-windows
          platform: windows-x86_64
      mainJar:
        path: 'target/app-{{projectVersion}}.jar'
      linux:
        types: [rpm]
      osx:
        types: [dmg, pkg]
      windows:
        types: [exe]
----

[source]
----
$ jreleaser assemble
----

* app-1.0.0-osx-x86_64.dmg
* app-1.0.0-osx-x86_64.pkg
